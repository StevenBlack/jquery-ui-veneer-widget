<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>jQuery Veneer Widget Demo</title>
<link rel="stylesheet" type="text/css" href="../src/jquery.veneer.css" />
<link rel="stylesheet" type="text/css" href="assets/style.css" />
<link rel="stylesheet" type="text/css" href="assets/prettify.css" />
<style>
	body {margin: 0 1.5em;}
	.veneer { margin:1em;}
	.veneer p, .veneer ul li, .veneer ol li { margin-left: 0.5em; margin-right: 0.5em;}
	.bottom { margin-bottom: 0;}
	.top { margin-top: 0;}
	h1, h2, h3, h4, h5, h6 { color: inherit;}
	.veneerCode { width:600px; height:6em; margin: 1em 1em 1em 0;}
	.clear {clear:both;}
	.demoTitle {width:50%;}
</style>

<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/ui-lightness/jquery-ui.css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>
<script type="text/javascript" src="assets/prettify.js"></script>
<script type="text/javascript" src="../src/jquery.ui.veneer.js"></script>
<script type="text/javascript">
function setupVeneers( codeBox ) {
	// evaluate the code in the textarea
	eval( codeBox.val() );
}
</script>
</head>
<body id="test" onload="prettyPrint();">

<h2 class="demoTitle">Very Basic Demo</h2>
<p>This demo wraps vanilla content in a themeable container.</p>

<div class="veneerControls ui-helper-clearfix clear">
	<strong>Veneer code:</strong>
	<textarea class="veneerCode ui-helper-clearfix">
$("#target").veneer();	
	</textarea>				
	<div id="output" class="clear"></div>
</div>
<button class="veneerToggle">Toggle veneers</button>

<div id="target" class="veneer" title="This is from the title attribute"></div>

<script type="text/javascript">
$(function() {
	$("button").button();
	
	// Purely for ease of demo maintenance, load the common demo elements to be veneered.
	$("#target").load("textToVeneer.htm");
	
	// Set-up the Toggle
	$(".veneerToggle").each( function() {
		var tog= $( this ), codeBox = $(".veneerCode");
		tog.toggle( 
			function () { 
				setupVeneers( codeBox ); 
				numElements();			
			},
			function() { 
				$(":ui-veneer", $(this).closest("body") ).veneer( "destroy" );
				numElements();				
			}
		);
	});
	
	// As a poinyt of information, display the initial number of DOM elements
	numElements();
});

// Display the number of elements on the page -- looking for "leaks" caused 
// by items missed in the destroy() method.
function numElements() {
	// display the aggregate number of elements on the page.
	var op = $("#output");
	if ( ! op.children().length ) {
		$("<p><strong>Number of DOM Elements: </strong> starting with: </p>").appendTo( op );
	}
	op.find("p").append( $("*").length+ " elements / ");
}

</script>
</body>
</html>
